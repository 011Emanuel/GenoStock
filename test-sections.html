<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dashboard Sections - Genostock</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 2rem;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .section-test {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            background: #f8f9fa;
        }
        
        .section-test.active {
            border-color: #2c5530;
            background: #e8f5e8;
        }
        
        .test-button {
            background: #2c5530;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            margin: 0.5rem;
        }
        
        .test-button:hover {
            background: #1b3a1d;
        }
        
        .status {
            padding: 0.5rem;
            border-radius: 4px;
            margin: 0.5rem 0;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Dashboard Sections Test</h1>
        
        <div class="section-test">
            <h3>Authentication Test</h3>
            <button class="test-button" onclick="testAuth()">Test Authentication</button>
            <div id="auth-status"></div>
        </div>
        
        <div class="section-test">
            <h3>Navigation Test</h3>
            <button class="test-button" onclick="testNavigation()">Test Navigation Elements</button>
            <div id="nav-status"></div>
        </div>
        
        <div class="section-test">
            <h3>Section Visibility Test</h3>
            <button class="test-button" onclick="testSectionVisibility()">Test Section Display</button>
            <div id="section-status"></div>
        </div>
        
        <div class="section-test">
            <h3>Component Test</h3>
            <button class="test-button" onclick="testComponents()">Test Components</button>
            <div id="component-status"></div>
        </div>
        
        <div class="section-test">
            <h3>Quick Actions</h3>
            <button class="test-button" onclick="loginAndGo()">Login & Go to Dashboard</button>
            <button class="test-button" onclick="openDashboard()">Open Dashboard Directly</button>
            <button class="test-button" onclick="clearStorage()">Clear Storage</button>
        </div>
        
        <div class="section-test">
            <h3>Debug Information</h3>
            <div id="debug-info"></div>
        </div>
    </div>

    <script>
        function testAuth() {
            const status = document.getElementById('auth-status');
            const username = localStorage.getItem('username');
            const name = localStorage.getItem('name');
            const role = localStorage.getItem('role');
            
            if (username) {
                status.innerHTML = `
                    <div class="status success">
                        ✅ Authentication OK<br>
                        User: ${name || username}<br>
                        Role: ${role || 'user'}
                    </div>
                `;
            } else {
                status.innerHTML = `
                    <div class="status error">
                        ❌ No user logged in<br>
                        Please login first
                    </div>
                `;
            }
        }
        
        function testNavigation() {
            const status = document.getElementById('nav-status');
            try {
                // Test if sidebar elements exist
                const sidebar = document.querySelector('.sidebar');
                const sidebarLinks = document.querySelectorAll('.sidebar-link');
                const contentSections = document.querySelectorAll('.content-section');
                
                let result = '';
                if (sidebar) {
                    result += '✅ Sidebar found<br>';
                } else {
                    result += '❌ Sidebar not found<br>';
                }
                
                if (sidebarLinks.length > 0) {
                    result += `✅ Sidebar links found: ${sidebarLinks.length}<br>`;
                } else {
                    result += '❌ No sidebar links found<br>';
                }
                
                if (contentSections.length > 0) {
                    result += `✅ Content sections found: ${contentSections.length}<br>`;
                } else {
                    result += '❌ No content sections found<br>';
                }
                
                status.innerHTML = `<div class="status info">${result}</div>`;
            } catch (error) {
                status.innerHTML = `<div class="status error">❌ Navigation test failed: ${error.message}</div>`;
            }
        }
        
        function testSectionVisibility() {
            const status = document.getElementById('section-status');
            try {
                // Test if sections can be shown/hidden
                const sections = ['profile', 'health', 'production', 'planning', 'inventory', 'sales'];
                let result = '';
                
                sections.forEach(sectionId => {
                    const section = document.getElementById(sectionId);
                    if (section) {
                        result += `✅ Section "${sectionId}" found<br>`;
                    } else {
                        result += `❌ Section "${sectionId}" not found<br>`;
                    }
                });
                
                status.innerHTML = `<div class="status info">${result}</div>`;
            } catch (error) {
                status.innerHTML = `<div class="status error">❌ Section test failed: ${error.message}</div>`;
            }
        }
        
        function testComponents() {
            const status = document.getElementById('component-status');
            try {
                let result = '';
                
                // Test header component
                if (typeof window.createAuthHeader === 'function') {
                    result += '✅ Header component available<br>';
                } else {
                    result += '❌ Header component not found<br>';
                }
                
                // Test Chart.js
                if (typeof Chart !== 'undefined') {
                    result += '✅ Chart.js available<br>';
                } else {
                    result += '❌ Chart.js not found<br>';
                }
                
                // Test Bootstrap
                if (typeof bootstrap !== 'undefined') {
                    result += '✅ Bootstrap available<br>';
                } else {
                    result += '❌ Bootstrap not found<br>';
                }
                
                status.innerHTML = `<div class="status info">${result}</div>`;
            } catch (error) {
                status.innerHTML = `<div class="status error">❌ Component test failed: ${error.message}</div>`;
            }
        }
        
        function loginAndGo() {
            // Set test user
            localStorage.setItem('username', 'testuser');
            localStorage.setItem('name', 'Test User');
            localStorage.setItem('role', 'rancher');
            
            alert('Logged in! Redirecting to dashboard...');
            window.location.href = 'dashboard-rancher.html';
        }
        
        function openDashboard() {
            if (!localStorage.getItem('username')) {
                alert('Please login first!');
                return;
            }
            window.location.href = 'dashboard-rancher.html';
        }
        
        function clearStorage() {
            localStorage.clear();
            alert('Storage cleared!');
            location.reload();
        }
        
        function updateDebugInfo() {
            const debugInfo = document.getElementById('debug-info');
            const username = localStorage.getItem('username');
            const name = localStorage.getItem('name');
            const role = localStorage.getItem('role');
            
            debugInfo.innerHTML = `
                <div class="status info">
                    <strong>Current Storage:</strong><br>
                    Username: ${username || 'None'}<br>
                    Name: ${name || 'None'}<br>
                    Role: ${role || 'None'}<br>
                    <br>
                    <strong>Page Info:</strong><br>
                    URL: ${window.location.href}<br>
                    User Agent: ${navigator.userAgent.substring(0, 50)}...
                </div>
            `;
        }
        
        // Run tests on load
        document.addEventListener('DOMContentLoaded', function() {
            testAuth();
            testNavigation();
            testSectionVisibility();
            testComponents();
            updateDebugInfo();
        });
    </script>
</body>
</html> 