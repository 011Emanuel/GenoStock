<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Login Redirect - Genostock</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 2rem;
            background: #f8f9fa;
        }
        .test-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        .test-btn {
            margin: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="test-card">
            <h2>Test Login Redirect</h2>
            <p>Esta página permite probar el sistema de redirección según el rol del usuario.</p>
            
            <h4>Usuarios de Prueba:</h4>
            <div class="row">
                <div class="col-md-6">
                    <h5>Ranchers:</h5>
                    <ul>
                        <li>Email: rancher1@email.com | Password: 1234</li>
                        <li>Email: rancher2@email.com | Password: 1234</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5>Traders:</h5>
                    <ul>
                        <li>Email: trader1@email.com | Password: 1234</li>
                        <li>Email: trader2@email.com | Password: 1234</li>
                        <li>Email: trader3@email.com | Password: 1234</li>
                    </ul>
                </div>
            </div>
            
            <h4>Pruebas Rápidas:</h4>
            <button class="btn btn-success test-btn" onclick="testRancherLogin()">
                Test Rancher Login
            </button>
            <button class="btn btn-primary test-btn" onclick="testTraderLogin()">
                Test Trader Login
            </button>
            <button class="btn btn-warning test-btn" onclick="testInvalidLogin()">
                Test Invalid Login
            </button>
            
            <div id="testResults" class="mt-3"></div>
        </div>
        
        <div class="test-card">
            <h4>Verificar Rutas:</h4>
            <button class="btn btn-info test-btn" onclick="checkDashboardPaths()">
                Verificar Rutas de Dashboard
            </button>
            <div id="pathResults" class="mt-3"></div>
        </div>
    </div>

    <script>
        // Base de datos local de usuarios de ejemplo (igual que en login.js)
        const users = [
            { email: 'rancher1@email.com', username: 'rancher1', password: '1234', name: 'Juan Pérez', role: 'rancher' },
            { email: 'rancher2@email.com', username: 'rancher2', password: '1234', name: 'María López', role: 'rancher' },
            { email: 'trader1@email.com', username: 'trader1', password: '1234', name: 'Carlos Ruiz', role: 'trader' },
            { email: 'trader2@email.com', username: 'trader2', password: '1234', name: 'Ana Torres', role: 'trader' },
            { email: 'trader3@email.com', username: 'trader3', password: '1234', name: 'Luis Gómez', role: 'trader' }
        ];

        function testRancherLogin() {
            const user = users.find(u => u.role === 'rancher');
            if (user) {
                localStorage.setItem('username', user.username);
                localStorage.setItem('name', user.name);
                localStorage.setItem('role', user.role);
                
                document.getElementById('testResults').innerHTML = `
                    <div class="alert alert-success">
                        <strong>✅ Rancher Login Exitoso!</strong><br>
                        Usuario: ${user.name}<br>
                        Rol: ${user.role}<br>
                        Redirigiendo a: dashboard/rancher/rancher.html
                    </div>
                `;
                
                setTimeout(() => {
                    window.location.href = 'dashboard/rancher/rancher.html';
                }, 2000);
            }
        }

        function testTraderLogin() {
            const user = users.find(u => u.role === 'trader');
            if (user) {
                localStorage.setItem('username', user.username);
                localStorage.setItem('name', user.name);
                localStorage.setItem('role', user.role);
                
                document.getElementById('testResults').innerHTML = `
                    <div class="alert alert-success">
                        <strong>✅ Trader Login Exitoso!</strong><br>
                        Usuario: ${user.name}<br>
                        Rol: ${user.role}<br>
                        Redirigiendo a: dashboard/trader/trader.html
                    </div>
                `;
                
                setTimeout(() => {
                    window.location.href = 'dashboard/trader/trader.html';
                }, 2000);
            }
        }

        function testInvalidLogin() {
            document.getElementById('testResults').innerHTML = `
                <div class="alert alert-danger">
                    <strong>❌ Login Inválido!</strong><br>
                    Usuario o contraseña incorrectos
                </div>
            `;
        }

        function checkDashboardPaths() {
            const paths = [
                'dashboard/rancher/rancher.html',
                'dashboard/trader/trader.html'
            ];
            
            let results = '<h5>Resultados de Verificación:</h5>';
            
            paths.forEach(path => {
                fetch(path, { method: 'HEAD' })
                    .then(response => {
                        if (response.ok) {
                            results += `<div class="alert alert-success">✅ ${path} - Existe</div>`;
                        } else {
                            results += `<div class="alert alert-danger">❌ ${path} - No existe</div>`;
                        }
                        document.getElementById('pathResults').innerHTML = results;
                    })
                    .catch(error => {
                        results += `<div class="alert alert-danger">❌ ${path} - Error: ${error.message}</div>`;
                        document.getElementById('pathResults').innerHTML = results;
                    });
            });
        }
    </script>
</body>
</html> 